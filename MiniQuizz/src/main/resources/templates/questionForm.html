<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${nuevo} ? 'Alta de pregunta' : 'Modificar pregunta'">titulo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/estilos.css}">
</head>

<body>
    <div class="app-container">
        <div class="card-shell">

            <h1 class="mb-1" th:text="${nuevo} ? 'Alta de pregunta' : 'Modificar pregunta'">titulo</h1>

            <div class="text-secondary mb-3">
                <span th:if="${block != null}" th:text="'Bloque: ' + ${block.name}">Bloque</span>
            </div>

            <div class="alert alert-warning" role="alert" th:if="${msg != null}" th:text="${msg}">
                mensaje
            </div>

            <form th:action="@{/question/save}" th:object="${question}" method="POST" class="row g-3">

                <!-- ID (solo si existe) -->
                <div class="col-md-4" th:if="*{id}">
                    <label class="form-label">ID</label>
                    <input type="text" class="form-control" th:field="*{id}" readonly>
                </div>

                <!-- Bloque (lo guardamos oculto para que la pregunta se asocie al bloque) -->
                <input type="hidden" th:field="*{block.id}">

                <!-- Enunciado -->
                <div class="col-12">
                    <label class="form-label">Enunciado</label>
                    <textarea class="form-control" rows="3" th:field="*{statement}" required></textarea>
                    <div class="text-danger mt-1" th:if="${#fields.hasErrors('statement')}" th:errors="*{statement}">
                        Error
                    </div>
                </div>

                <!-- Opción A -->
                <div class="col-md-6">
                    <label class="form-label">Opción A</label>
                    <input type="text" class="form-control" th:field="*{optionA}" required>
                    <div class="text-danger mt-1" th:if="${#fields.hasErrors('optionA')}" th:errors="*{optionA}">
                        Error
                    </div>
                </div>

                <!-- Opción B -->
                <div class="col-md-6">
                    <label class="form-label">Opción B</label>
                    <input type="text" class="form-control" th:field="*{optionB}" required>
                    <div class="text-danger mt-1" th:if="${#fields.hasErrors('optionB')}" th:errors="*{optionB}">
                        Error
                    </div>
                </div>

                <!-- Opción C -->
                <div class="col-md-6">
                    <label class="form-label">Opción C</label>
                    <input type="text" class="form-control" th:field="*{optionC}" required>
                    <div class="text-danger mt-1" th:if="${#fields.hasErrors('optionC')}" th:errors="*{optionC}">
                        Error
                    </div>
                </div>

                <!-- Opción D -->
                <div class="col-md-6">
                    <label class="form-label">Opción D</label>
                    <input type="text" class="form-control" th:field="*{optionD}" required>
                    <div class="text-danger mt-1" th:if="${#fields.hasErrors('optionD')}" th:errors="*{optionD}">
                        Error
                    </div>
                </div>

                <!-- Correcta -->
                <div class="col-md-4">
                    <label class="form-label">Opción correcta</label>
                    <select class="form-select" th:field="*{correctOption}" required>
                        <option value="">-- Selecciona --</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                    <div class="text-danger mt-1" th:if="${#fields.hasErrors('correctOption')}" th:errors="*{correctOption}">
                        Error
                    </div>
                </div>

                <div class="col-12">
                    <button class="btn btn-main" type="submit" th:text="${nuevo} ? 'Guardar' : 'Modificar'">
                        Guardar
                    </button>

                    <a class="btn btn-outline-light ms-2"
                       th:href="@{/question/block/{id}(id=${question.block.id})}">
                        Cancelar
                    </a>
                </div>

            </form>

        </div>
    </div>
</body>
</html>
